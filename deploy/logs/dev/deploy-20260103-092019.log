Starting Dev Deployment at 20260103-092019
--- DXMT Dev Sanity Check ---
Checking AI Gateway configuration...
✅ AI Key appears configured.
Checking running services...
✅ dxmt-ai-service is running.
✅ nginx-proxy-manager is running.
⚠️  mailcow-dockerized-nginx-mailcow-1 is NOT running.
-----------------------------
Restoring Mailcow configuration files...
Configuration files restored and cleaned.
Deploying dev services...
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"GEMINI_API_KEY\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="/root/dxmtoffice/infrastructure/nginx/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBROOT\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBROOT\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"ADDITIONAL_SAN\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBROOT\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-03T09:20:20+07:00" level=warning msg="/root/dxmtoffice/office/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Image dxmtoffice-ai-service Building 
#1 [internal] load local bake definitions
#1 reading from stdin 528B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 159B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/node:20-alpine
#3 DONE 0.9s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 91B done
#5 DONE 0.0s

#6 [1/5] FROM docker.io/library/node:20-alpine@sha256:658d0f63e501824d6c23e06d4bb95c71e7d704537c9d9272f488ac03a370d448
#6 resolve docker.io/library/node:20-alpine@sha256:658d0f63e501824d6c23e06d4bb95c71e7d704537c9d9272f488ac03a370d448 0.0s done
#6 DONE 0.0s

#7 [4/5] RUN npm install
#7 CACHED

#8 [2/5] WORKDIR /app
#8 CACHED

#9 [3/5] COPY package*.json ./
#9 CACHED

#10 [5/5] COPY . .
#10 CACHED

#11 exporting to image
#11 exporting layers done
#11 exporting manifest sha256:6567578e43b287366c198941a7f12f6e77a6d1c20b3aa308a718461ed5c5e153 done
#11 exporting config sha256:e085b64a49927e2055ad3300acba799f9af9c826b85725dad9f1aaba7a660115 done
#11 exporting attestation manifest sha256:1da841e69c35230d05559b9bd601e4c49a6a0f82c6076357b8dd81969b7f0307
#11 exporting attestation manifest sha256:1da841e69c35230d05559b9bd601e4c49a6a0f82c6076357b8dd81969b7f0307 0.0s done
#11 exporting manifest list sha256:e956fea88fe9aa97cda32f135b3b32a18ed9974373b1e16cbeff55127ce6cce9 0.0s done
#11 naming to docker.io/library/dxmtoffice-ai-service:latest done
#11 unpacking to docker.io/library/dxmtoffice-ai-service:latest 0.0s done
#11 DONE 0.1s

#12 resolving provenance for metadata file
#12 DONE 0.0s
 Image dxmtoffice-ai-service Built 
 Container dxmtoffice-sogo-mailcow-1 Running 
 Container dxmtoffice-nextcloud-redis-1 Running 
 Container dxmtoffice-memcached-mailcow-1 Running 
 Container dxmt-ai-service Recreate 
 Container dxmtoffice-onlyoffice-app-1 Running 
 Container dxmtoffice-olefy-mailcow-1 Running 
 Container dxmtoffice-db-1 Running 
 Container dxmtoffice-app-1 Recreate 
 Container dxmtoffice-nextcloud-db-1 Running 
 Container dxmtoffice-netfilter-mailcow-1 Running 
 Container dxmtoffice-nextcloud-app-1 Running 
 Container dxmtoffice-php-fpm-mailcow-1 Running 
 Container dxmtoffice-dovecot-mailcow-1 Running 
 Container dxmtoffice-ofelia-mailcow-1 Running 
 Container dxmtoffice-app-1 Recreated 
 Container dxmt-ai-service Recreated 
 Container dxmtoffice-dockerapi-mailcow-1 Starting 
 Container dxmt-ai-service Starting 
 Container dxmtoffice-unbound-mailcow-1 Starting 
 Container dxmtoffice-redis-mailcow-1 Starting 
 Container dxmtoffice-nextcloud-web-1 Starting 
 Container dxmtoffice-app-1 Starting 
 Container dxmtoffice-dockerapi-mailcow-1 Started 
 Container dxmtoffice-nextcloud-web-1 Started 
 Container dxmtoffice-unbound-mailcow-1 Started 
 Container dxmtoffice-unbound-mailcow-1 Waiting 
 Container dxmtoffice-unbound-mailcow-1 Waiting 
 Container dxmtoffice-mysql-mailcow-1 Starting 
 Container dxmtoffice-mysql-mailcow-1 Started 
 Container dxmt-ai-service Started 
 Container dxmtoffice-unbound-mailcow-1 Error dependency unbound-mailcow failed to start
 Container dxmtoffice-unbound-mailcow-1 Error dependency unbound-mailcow failed to start
Error response from daemon: failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: error mounting "/root/dxmtoffice/mailcow/data/conf/redis/redis-conf.sh" to rootfs at "/redis-conf.sh": mount src=/root/dxmtoffice/mailcow/data/conf/redis/redis-conf.sh, dst=/redis-conf.sh, dstFd=/proc/thread-self/fd/11, flags=MS_BIND|MS_REC: not a directory: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type
Running Healthchecks...
✅ Nginx Proxy Manager (80) is UP
✅ SSL Gateway (443) is UP
❌ Postfix (SMTP) (25) is DOWN
❌ Submission (SMTP) (587) is DOWN
✅ IMAP (Secure) (993) is UP
❌ Mailcow UI (Internal) (8080) is DOWN
❌ Nextcloud (Internal) (8081) is DOWN
✅ OnlyOffice (Internal) (8082) is UP
Archiving log to history branch...
