Starting Dev Deployment at 20260102-170949
--- DXMT Dev Sanity Check ---
Checking AI Gateway configuration...
✅ AI Key appears configured.
Checking running services...
⚠️  dxmt-ai-service is NOT running.
✅ nginx-proxy-manager is running.
⚠️  mailcow-dockerized-nginx-mailcow-1 is NOT running.
-----------------------------
Deploying dev services...
time="2026-01-02T17:09:49+07:00" level=warning msg="The \"GEMINI_API_KEY\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:49+07:00" level=warning msg="/root/dxmtoffice/infrastructure/nginx/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"ADDITIONAL_SAN\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBROOT\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBROOT\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBROOT\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBNAME\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBUSER\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"DBPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="The \"REDISPASS\" variable is not set. Defaulting to a blank string."
time="2026-01-02T17:09:50+07:00" level=warning msg="/root/dxmtoffice/office/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Image dxmtoffice-ai-service Building 
#1 [internal] load local bake definitions
#1 reading from stdin 528B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 159B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/node:20-alpine
#3 DONE 3.5s

#4 [internal] load .dockerignore
#4 transferring context: 2B done
#4 DONE 0.0s

#5 [internal] load build context
#5 transferring context: 2.55kB done
#5 DONE 0.0s

#6 [1/5] FROM docker.io/library/node:20-alpine@sha256:658d0f63e501824d6c23e06d4bb95c71e7d704537c9d9272f488ac03a370d448
#6 resolve docker.io/library/node:20-alpine@sha256:658d0f63e501824d6c23e06d4bb95c71e7d704537c9d9272f488ac03a370d448 0.0s done
#6 sha256:fd1849a5c548bc65ee47a64498951bda5d40e87d08efe9dca69b5c8cdedc7a52 0B / 443B 0.2s
#6 sha256:cb3325e64457574e24f92246e3da3376946e473d636209e1390eac47b50b26a3 0B / 1.26MB 0.2s
#6 sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697 0B / 42.78MB 0.2s
#6 sha256:fd1849a5c548bc65ee47a64498951bda5d40e87d08efe9dca69b5c8cdedc7a52 443B / 443B 0.6s done
#6 sha256:cb3325e64457574e24f92246e3da3376946e473d636209e1390eac47b50b26a3 1.26MB / 1.26MB 1.1s done
#6 sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697 5.77MB / 42.78MB 1.5s
#6 sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697 14.68MB / 42.78MB 1.7s
#6 sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697 20.97MB / 42.78MB 1.8s
#6 sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697 27.26MB / 42.78MB 2.0s
#6 sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697 31.46MB / 42.78MB 2.1s
#6 sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697 37.75MB / 42.78MB 2.3s
#6 sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697 42.78MB / 42.78MB 2.4s done
#6 extracting sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697
#6 extracting sha256:8d06ba6946d1f299d8f962e37906c77006df33d47050430a57f7893ec35af697 1.5s done
#6 DONE 3.9s

#6 [1/5] FROM docker.io/library/node:20-alpine@sha256:658d0f63e501824d6c23e06d4bb95c71e7d704537c9d9272f488ac03a370d448
#6 extracting sha256:cb3325e64457574e24f92246e3da3376946e473d636209e1390eac47b50b26a3 0.1s done
#6 DONE 4.1s

#6 [1/5] FROM docker.io/library/node:20-alpine@sha256:658d0f63e501824d6c23e06d4bb95c71e7d704537c9d9272f488ac03a370d448
#6 extracting sha256:fd1849a5c548bc65ee47a64498951bda5d40e87d08efe9dca69b5c8cdedc7a52 0.0s done
#6 DONE 4.1s

#7 [2/5] WORKDIR /app
#7 DONE 0.2s

#8 [3/5] COPY package*.json ./
#8 DONE 0.0s

#9 [4/5] RUN npm install
#9 6.332 
#9 6.332 added 78 packages, and audited 79 packages in 6s
#9 6.332 
#9 6.332 17 packages are looking for funding
#9 6.332   run `npm fund` for details
#9 6.334 
#9 6.334 found 0 vulnerabilities
#9 6.336 npm notice
#9 6.336 npm notice New major version of npm available! 10.8.2 -> 11.7.0
#9 6.336 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.7.0
#9 6.336 npm notice To update run: npm install -g npm@11.7.0
#9 6.336 npm notice
#9 DONE 6.5s

#10 [5/5] COPY . .
#10 DONE 0.1s

#11 exporting to image
#11 exporting layers
#11 exporting layers 0.7s done
#11 exporting manifest sha256:6567578e43b287366c198941a7f12f6e77a6d1c20b3aa308a718461ed5c5e153 done
#11 exporting config sha256:e085b64a49927e2055ad3300acba799f9af9c826b85725dad9f1aaba7a660115 done
#11 exporting attestation manifest sha256:2aa7a156a0f820b01dedf0eb7b8b6c60ea98ec616263fd6a5d3422e442ed67f3 0.0s done
#11 exporting manifest list sha256:e78ec90ab9fe000adf742ee1f96f6d071a52399721fb35aff2479907aa22c410 done
#11 naming to docker.io/library/dxmtoffice-ai-service:latest done
#11 unpacking to docker.io/library/dxmtoffice-ai-service:latest
#11 unpacking to docker.io/library/dxmtoffice-ai-service:latest 0.5s done
#11 DONE 1.3s

#12 resolving provenance for metadata file
#12 DONE 0.0s
 Image dxmtoffice-ai-service Built 
 Network dxmtoffice_mailcow-network Creating 
 Network dxmtoffice_mailcow-network Created 
 Network dxmtoffice_default Creating 
 Network dxmtoffice_default Created 
 Network dxmtoffice_office-network Creating 
 Network dxmtoffice_office-network Created 
network infrastructure_default declared as external, but could not be found
Running Healthchecks...
✅ Nginx Proxy Manager (80) is UP
✅ SSL Gateway (443) is UP
❌ Postfix (SMTP) (25) is DOWN
❌ Submission (SMTP) (587) is DOWN
❌ IMAP (Secure) (993) is DOWN
❌ Mailcow UI (Internal) (8080) is DOWN
❌ Nextcloud (Internal) (8081) is DOWN
❌ OnlyOffice (Internal) (8082) is DOWN
Archiving log to history branch...
